
インデックスの作成
インデックスを出力するディレクトリを作成
mkdir /Volumes/Biomasa/rat_cor/ref/STAR_reference
cd /Volumes/Biomasa/rat_cor/ref/STAR_reference

インデックス作成
~/Analysis/STAR-2.7.0a/bin/MacOSX_x86_64/STAR --runMode genomeGenerate --genomeDir /Volumes/Biomasa/rat_cor/ref/STAR_reference --genomeFastaFiles /Volumes/Biomasa/rat_cor/ref/Rattus_norvegicus.Rnor_6.0.dna.toplevel.fa --sjdbGTFfile /Volumes/Biomasa/rat_cor/ref/Rattus_norvegicus.Rnor_6.0.95.gtf








マッピング
マッピングしたファイルを保管するディレクトリを作成
mkdir -p /Volumes/Biomasa/expression/STAR

cd /Volumes/Biomasa/expression/STAR

１サンプル分のマッピング（SRR *******には実在するSRR IDを記入する）
 ~/Analysis/STAR-2.7.0a/bin/MacOSX_x86_64/STAR --runMode alignReads --genomeDir ../ref/STAR_reference --readFilesCommand gunzip -c --readFilesIn ../seq/SRR1551011_1.fastq.gz ../seq/SRR1551011_2.fastq.gz --outSAMtype BAM SortedByCoordinate --runThreadN 4 --outFileNamePrefix SRR1551011 --quantMode TranscriptomeSAM

多サンプルのマッピング 今回は動かず　　　
for sample in `ls ../seq/*fastq.gz | xargs basename | cut -f1 -d"_" | uniq`; do echo mapping:${sample}; ~/Analysis/STAR-2.7.0a/bin/MacOSX_x86_64/STAR --runMode alignReads --genomeDir ../ref/STAR_reference --readFilesCommand gunzip -c --readFilesIn ../seq/${sample}_1.fastq.gz ../seq/${sample}_2.fastq.gz --outSAMtype BAM SortedByCoordinate --runThreadN 4 --quantMode TranscriptomeSAM --outFileNamePrefix ${sample};done; echo finished

# これで動きました。　fastq.gzの場合
for sample in `ls ../seq/*fastq.gz | xargs basename -s .fastq.gz | cut -f1 -d"_" | uniq`; do echo mapping:${sample}; ~/Analysis/STAR-2.7.0a/bin/MacOSX_x86_64/STAR --runMode alignReads --genomeDir ../ref/STAR_reference --readFilesCommand gunzip -c --readFilesIn ../seq/${sample}_1.fastq.gz ../seq/${sample}_2.fastq.gz --outSAMtype BAM SortedByCoordinate --runThreadN 4 --quantMode TranscriptomeSAM --outFileNamePrefix ${sample};done; echo finished    

# .fastqの場合　
for sample in `ls ../seq/*fastq | xargs basename -s .fastq | cut -f1 -d"_" | uniq`; do echo mapping:${sample}; ~/Analysis/STAR-2.7.0a/bin/MacOSX_x86_64/STAR --runMode alignReads --genomeDir ../ref/STAR_reference --readFilesIn ../seq/${sample}_1.fastq ../seq/${sample}_2.fastq --outSAMtype BAM SortedByCoordinate --runThreadN 4 --quantMode TranscriptomeSAM --outFileNamePrefix ${sample};done; echo finished 
